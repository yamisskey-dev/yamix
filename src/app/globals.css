@tailwind base;
@tailwind components;
@tailwind utilities;

/* DXM Dark Theme (default) */
:root {
  --background: #130E26;
  --foreground: #C2CBE0;
  --accent-purple: #A374FF;
  --accent-pink: #B32DB6;
  --accent-gradient: linear-gradient(135deg, #B32DB6, #966BFF, #4B38A5);
}

/* NGO Light Theme */
[data-theme="light"] {
  --background: #FFF5FC;
  --foreground: #391E60;
  --accent-purple: #966BFF;
  --accent-pink: #FF9DFF;
  --accent-gradient: linear-gradient(172deg, #FF9DFF, #A398FF 45%, #7D66FF);
}

:root:has(.no-doc-scroll) {
  overflow: hidden;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-sarasa-gothic), Arial, Helvetica, sans-serif;
}

/* Background with image */
.animated-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  background-image: url('https://angelkawaii.com/wp-content/uploads/2024/01/33.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.animated-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(19, 14, 38, 0.6);
}

[data-theme="light"] .animated-bg::after {
  background: rgba(255, 245, 252, 0.7);
}

/* Spinner animation */
@keyframes spinner {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.animate-spin-slow {
  animation: spinner 6s linear infinite;
}

/* Glass effect */
.glass-card {
  @apply backdrop-blur-md bg-white/70 dark:bg-gray-900/70 border border-white/20 dark:border-gray-700/30;
}

/* Chat bubbles - enhanced styling */
/* Override DaisyUI default max-width for wider bubbles */
.chat-bubble {
  max-width: 90%;
}

.chat-user {
  @apply bg-gradient-to-br from-primary to-secondary text-primary-content rounded-2xl rounded-br-sm;
  box-shadow: 0 2px 8px rgba(163, 116, 255, 0.2);
}

/* Fix tail color for user bubble */
.chat-end .chat-user::before {
  background: linear-gradient(135deg, hsl(var(--s)), hsl(var(--s)));
}

[data-theme="light"] .chat-user {
  box-shadow: 0 2px 8px rgba(150, 107, 255, 0.25);
}

.chat-assistant {
  @apply bg-base-300 text-base-content rounded-2xl rounded-bl-sm;
  border: 1px solid rgba(163, 116, 255, 0.2);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Fix tail color for assistant bubble */
.chat-start .chat-assistant::before {
  background-color: hsl(var(--b3));
  border-color: rgba(163, 116, 255, 0.2);
}

[data-theme="light"] .chat-assistant {
  @apply bg-base-200;
  border: 1px solid rgba(150, 107, 255, 0.2);
  box-shadow: 0 2px 8px rgba(147, 137, 255, 0.12);
}

[data-theme="light"] .chat-start .chat-assistant::before {
  background-color: hsl(var(--b2));
  border-color: rgba(150, 107, 255, 0.2);
}

.chat-assistant-loading {
  @apply bg-base-300 text-base-content rounded-2xl rounded-bl-sm;
  border: 1px solid rgba(163, 116, 255, 0.15);
}

/* Fix tail color for loading bubble */
.chat-start .chat-assistant-loading::before {
  background-color: hsl(var(--b3));
  border-color: rgba(163, 116, 255, 0.15);
}

/* Human response bubble - distinct from AI */
.chat-human-response {
  @apply bg-base-200 text-base-content;
  border: 1px solid rgba(179, 45, 182, 0.3);
  box-shadow: 0 2px 8px rgba(179, 45, 182, 0.15);
}

/* Fix tail color for human response bubble */
.chat-start .chat-human-response::before {
  background-color: hsl(var(--b2));
  border-color: rgba(179, 45, 182, 0.3);
}

[data-theme="light"] .chat-human-response {
  border: 1px solid rgba(255, 157, 255, 0.4);
  box-shadow: 0 2px 8px rgba(255, 157, 255, 0.2);
}

[data-theme="light"] .chat-start .chat-human-response::before {
  background-color: hsl(var(--b2));
  border-color: rgba(255, 157, 255, 0.4);
}

/* Typing animation - gradient pulse (Misskey-inspired) */
@keyframes typing-pulse {
  0%, 100% {
    transform: scale(0.8);
    opacity: 0.4;
  }
  50% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes gradient-shift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.typing-dot-gradient {
  @apply w-2 h-2 rounded-full;
  background: var(--accent-gradient);
  background-size: 200% 200%;
  animation: typing-pulse 1.2s infinite ease-in-out, gradient-shift 3s infinite ease-in-out;
}

.typing-dot-gradient:nth-child(1) {
  animation-delay: 0s, 0s;
}

.typing-dot-gradient:nth-child(2) {
  animation-delay: 0.15s, 0.5s;
}

.typing-dot-gradient:nth-child(3) {
  animation-delay: 0.3s, 1s;
}

/* Legacy typing dot */
.typing-dot {
  @apply w-1.5 h-1.5 rounded-full bg-primary;
  animation: typing-pulse 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) {
  animation-delay: 0s;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.15s;
}

/* Emotion indicator colors */
.emotion-happiness { @apply bg-yellow-400; }
.emotion-sadness { @apply bg-blue-400; }
.emotion-anxiety { @apply bg-purple-400; }
.emotion-anger { @apply bg-red-400; }
.emotion-loneliness { @apply bg-indigo-400; }
.emotion-depression { @apply bg-gray-600; }
.emotion-stress { @apply bg-orange-400; }
.emotion-confusion { @apply bg-teal-400; }
.emotion-hope { @apply bg-green-400; }
.emotion-neutral { @apply bg-gray-400; }

/* Fade in animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* Slide up animation */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

/* Scale in animation (for modals) */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

/* Slide in right animation (for toasts) */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out;
}

/* GitHub Corner (yamisskey-down style) */
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}

@media (max-width: 500px) {
  .github-corner:hover .octo-arm {
    animation: none;
  }
  .github-corner .octo-arm {
    animation: octocat-wave 560ms ease-in-out;
  }
}
